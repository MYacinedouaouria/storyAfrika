{% extends 'root.html' %}

{% block home %}
{% include 'profile_card.html' %}
<div class="flex relative overflow-hidden">
    <div class='px-3 sm:px-0 md:min-w-[300px] md:max-w-[800px] md:w-[568px] lg:min-w-[400px] lg:max-w-[900px] lg:w-[768px] container left-0 shrink-1 overflow-y-hidden mx-auto md:border-r-[1px] md:border-r-black md:px-10 lg:px-20 xl:w-[768px]'>
    <header class="container px-2 mx-auto flex flex-col-reverse sm:px-0 sm:flex sm:flex-row sm:justify-between sm:items-center mt-[72px] shrink-1">
        <div class="flex gap-[25px] items-center">
            <div class="slider-container flex items-center justify-between shrink-0 px-1 sm:gap-2">
                <button class="prev"><img src="/static/icons/lt.svg" alt="" srcset=""></button>
                <div class="slider-wrapper w-[200px] overflow-x-hidden text-base sm:w-[250px] md:w-[250px] lg:w-[370px]">
                    <ul class="slider topics flex items-center gap-[25px] w-screen transition-all ease-out">
                        {% for key,topic in topics.items() %}
                            <li class="slider-item">{{topic.name}}</li>
                        {% endfor %}
                            <li class="slider-item">random</li>
                            <li class="slider-item">randomx1</li>
                            <li class="slider-item">randomx2</li>
                            <li class="slider-item">randomx3</li>
                            <li class="slider-item">randomx4</li>
                    </ul>
                </div>
                <button class="next"><img src="/static/icons/gt.svg" alt="" srcset=""></button>
            </div>
            <div class="shrink-0 flex self-end gap-3 lg:hidden">
                <button><img src="/static/icons/search.svg" alt=""></button>
                <button><a href="{{ url_for('write')}}"><img src="/static/icons/write.svg" alt="" srcset=""></a></button>
            </div>
        </div>

        <div class="flex justify-between items-center gap-4 -mt-10 mb-5 sm:block sm:mb-0 sm:gap-0 sm:-mt-0">
            <h1 class="block sm:hidden text-2xl font-medium shrink-0">storyafrika</h1>
            <div class="flex items-center justify-center sm:pr-0 lg:pr-2">
                <button class="hidden mr-5"><img src="/static/icons/search.svg" alt=""></button>
                {% if current_user.avatar %}
                <button class="home-profile-img border-2 rounded-full w-[60px] h-[60px] shrink-0"><img class="w-full h-full rounded-full object-cover" src="{{ url_for('upload', filename=current_user.avatar) }}" alt=""></button>
                {% else %}
                <button class="home-profile-img border-2 rounded-full w-[60px] h-[60px] shrink-0"><img class="w-full h-full rounded-full object-cover" src="/static/images/default-profile-image.png" alt=""></button>
                {% endif %}
            </div>
        </div>

    </header>
    <main class="container stories-container relative mx-auto mt-[20px] pt-[25px] border-t border-gray-500 flex flex-col gap-[50px] shrink-1 h-screen overflow-y-scroll no-scrollbar">
        {#{% for story in following_stories %}
            {% include 'story_card.html' %}
            <hr>
        {% else %}
            <h1>Try following some people to see their post here</h1>
        {% endfor %}#}
    </main>
    </div>
    <aside class="container right-0 overflow-y-scroll no-scrollbar shrink-1 mx-auto h-screen py-[80px] min-w-[200px] w-[400px] max-w-[700px] hidden md:block md:px-[20px] lg:px-[20px]">
        <div class="flex justify-between">
            <h1>storyafrika</h1>
            <div class="flex items-center gap-5">
                <button><img src="/static/icons/search.svg" alt=""></button>
                <button><a href="{{ url_for('write')}}"><img src="/static/icons/write.svg" alt="" srcset=""></a></button>
            </div>
        </div>

        <div class="bookmark mt-[40px]">
            <h3 class="mb-5 text-xs font-medium">From you bookmarks</h3>
            <div>
                {% for bookmark in current_user.bookmarks %}
                    {% if loop.index <= 3 %}
                    {% include 'bookmark_card.html' %}
                    {% endif %}
                
                {% endfor %}
            </div>
            <a href="" class="block underline text-lightblue">See all bookmarks</a>
        </div>
        <hr class="divider my-[50px]">
        <div class="likes">
            <h3 class="mb-5 text-xs font-medium">You recently liked</h3>
            <div>
                {% for like in current_user.likes %}
                    {% if loop.index <= 3 %}
                    {% include 'bookmark_card.html' %}
                    {% endif %}
                
                {% endfor %}
            </div>
        </div>
        <div class="who-to-follow">
            <h3 class="mt-[30px] mb-5 text-xs font-medium">Who to follow?</h3>
            <div class="">
                <div class="flex items-center gap-[15px]">
                    <div class="h-[50px] w-[50px] shrink-0">
                        <img class="h-full w-full rounded-full border-2" src="https://picsum.photos/200/300" alt="">
                    </div>
                    <div>
                        <div class="flex gap-2 items-center">
                            <h3 class="">{{current_user.username}}</h3>
                            <button class="flex items-center"><img src="/static/icons/plus.svg" alt="">follow</button>
                        </div>
                        <p class="text-xs text-lightgray">{{current_user.short_bio}}</p>
                    </div>
                    
                </div>

            </div>
            <a href="" class="block underline text-lightblue">More suggestions</a>
        </div>
    </aside>
</div>
{% endblock %}